import gym
import numpy
from gym.envs.toy_text import discrete


class WindyGridworld(discrete.DiscreteEnv):

    metadata = {'render.modes': ['human', 'ansi']}

    def __init__(self):
        transitions = {
            0: {
                0: [(1.0, 0, -1.0, False)],
                1: [(1.0, 1, -1.0, False)],
                2: [(1.0, 10, -1.0, False)],
                3: [(1.0, 0, -1.0, False)]
            },
            1: {
                0: [(1.0, 1, -1.0, False)],
                1: [(1.0, 2, -1.0, False)],
                2: [(1.0, 11, -1.0, False)],
                3: [(1.0, 0, -1.0, False)]
            },
            2: {
                0: [(1.0, 2, -1.0, False)],
                1: [(1.0, 3, -1.0, False)],
                2: [(1.0, 12, -1.0, False)],
                3: [(1.0, 1, -1.0, False)]
            },
            3: {
                0: [(1.0, 3, -1.0, False)],
                1: [(1.0, 4, -1.0, False)],
                2: [(1.0, 3, -1.0, False)],
                3: [(1.0, 2, -1.0, False)]
            },
            4: {
                0: [(1.0, 4, -1.0, False)],
                1: [(1.0, 5, -1.0, False)],
                2: [(1.0, 4, -1.0, False)],
                3: [(1.0, 3, -1.0, False)]
            },
            5: {
                0: [(1.0, 5, -1.0, False)],
                1: [(1.0, 6, -1.0, False)],
                2: [(1.0, 5, -1.0, False)],
                3: [(1.0, 4, -1.0, False)]
            },
            6: {
                0: [(1.0, 6, -1.0, False)],
                1: [(1.0, 7, -1.0, False)],
                2: [(1.0, 6, -1.0, False)],
                3: [(1.0, 5, -1.0, False)]
            },
            7: {
                0: [(1.0, 7, -1.0, False)],
                1: [(1.0, 8, -1.0, False)],
                2: [(1.0, 7, -1.0, False)],
                3: [(1.0, 6, -1.0, False)]
            },
            8: {
                0: [(1.0, 8, -1.0, False)],
                1: [(1.0, 9, -1.0, False)],
                2: [(1.0, 8, -1.0, False)],
                3: [(1.0, 7, -1.0, False)]
            },
            9: {
                0: [(1.0, 9, -1.0, False)],
                1: [(1.0, 9, -1.0, False)],
                2: [(1.0, 19, -1.0, False)],
                3: [(1.0, 8, -1.0, False)]
            },
            10: {
                0: [(1.0, 0, -1.0, False)],
                1: [(1.0, 11, -1.0, False)],
                2: [(1.0, 20, -1.0, False)],
                3: [(1.0, 10, -1.0, False)]
            },
            11: {
                0: [(1.0, 1, -1.0, False)],
                1: [(1.0, 12, -1.0, False)],
                2: [(1.0, 21, -1.0, False)],
                3: [(1.0, 10, -1.0, False)]
            },
            12: {
                0: [(1.0, 2, -1.0, False)],
                1: [(1.0, 13, -1.0, False)],
                2: [(1.0, 22, -1.0, False)],
                3: [(1.0, 11, -1.0, False)]
            },
            13: {
                0: [(1.0, 3, -1.0, False)],
                1: [(1.0, 4, -1.0, False)],
                2: [(1.0, 13, -1.0, False)],
                3: [(1.0, 2, -1.0, False)]
            },
            14: {
                0: [(1.0, 4, -1.0, False)],
                1: [(1.0, 5, -1.0, False)],
                2: [(1.0, 14, -1.0, False)],
                3: [(1.0, 3, -1.0, False)]
            },
            15: {
                0: [(1.0, 5, -1.0, False)],
                1: [(1.0, 6, -1.0, False)],
                2: [(1.0, 15, -1.0, False)],
                3: [(1.0, 4, -1.0, False)]
            },
            16: {
                0: [(1.0, 6, -1.0, False)],
                1: [(1.0, 7, -1.0, False)],
                2: [(1.0, 6, -1.0, False)],
                3: [(1.0, 5, -1.0, False)]
            },
            17: {
                0: [(1.0, 7, -1.0, False)],
                1: [(1.0, 8, -1.0, False)],
                2: [(1.0, 7, -1.0, False)],
                3: [(1.0, 6, -1.0, False)]
            },
            18: {
                0: [(1.0, 8, -1.0, False)],
                1: [(1.0, 9, -1.0, False)],
                2: [(1.0, 18, -1.0, False)],
                3: [(1.0, 7, -1.0, False)]
            },
            19: {
                0: [(1.0, 9, -1.0, False)],
                1: [(1.0, 19, -1.0, False)],
                2: [(1.0, 29, -1.0, False)],
                3: [(1.0, 18, -1.0, False)]
            },
            20: {
                0: [(1.0, 10, -1.0, False)],
                1: [(1.0, 21, -1.0, False)],
                2: [(1.0, 30, -1.0, False)],
                3: [(1.0, 20, -1.0, False)]
            },
            21: {
                0: [(1.0, 11, -1.0, False)],
                1: [(1.0, 22, -1.0, False)],
                2: [(1.0, 31, -1.0, False)],
                3: [(1.0, 20, -1.0, False)]
            },
            22: {
                0: [(1.0, 12, -1.0, False)],
                1: [(1.0, 23, -1.0, False)],
                2: [(1.0, 32, -1.0, False)],
                3: [(1.0, 21, -1.0, False)]
            },
            23: {
                0: [(1.0, 3, -1.0, False)],
                1: [(1.0, 14, -1.0, False)],
                2: [(1.0, 23, -1.0, False)],
                3: [(1.0, 12, -1.0, False)]
            },
            24: {
                0: [(1.0, 4, -1.0, False)],
                1: [(1.0, 15, -1.0, False)],
                2: [(1.0, 24, -1.0, False)],
                3: [(1.0, 13, -1.0, False)]
            },
            25: {
                0: [(1.0, 5, -1.0, False)],
                1: [(1.0, 16, -1.0, False)],
                2: [(1.0, 25, -1.0, False)],
                3: [(1.0, 14, -1.0, False)]
            },
            26: {
                0: [(1.0, 6, -1.0, False)],
                1: [(1.0, 7, -1.0, False)],
                2: [(1.0, 16, -1.0, False)],
                3: [(1.0, 5, -1.0, False)]
            },
            27: {
                0: [(1.0, 7, -1.0, False)],
                1: [(1.0, 8, -1.0, False)],
                2: [(1.0, 17, -1.0, False)],
                3: [(1.0, 6, -1.0, False)]
            },
            28: {
                0: [(1.0, 8, -1.0, False)],
                1: [(1.0, 19, -1.0, False)],
                2: [(1.0, 28, -1.0, False)],
                3: [(1.0, 17, -1.0, False)]
            },
            29: {
                0: [(1.0, 19, -1.0, False)],
                1: [(1.0, 29, -1.0, False)],
                2: [(1.0, 39, -1.0, False)],
                3: [(1.0, 28, -1.0, False)]
            },
            30: {
                0: [(1.0, 20, -1.0, False)],
                1: [(1.0, 31, -1.0, False)],
                2: [(1.0, 40, -1.0, False)],
                3: [(1.0, 30, -1.0, False)]
            },
            31: {
                0: [(1.0, 21, -1.0, False)],
                1: [(1.0, 32, -1.0, False)],
                2: [(1.0, 41, -1.0, False)],
                3: [(1.0, 30, -1.0, False)]
            },
            32: {
                0: [(1.0, 22, -1.0, False)],
                1: [(1.0, 33, -1.0, False)],
                2: [(1.0, 42, -1.0, False)],
                3: [(1.0, 31, -1.0, False)]
            },
            33: {
                0: [(1.0, 13, -1.0, False)],
                1: [(1.0, 24, -1.0, False)],
                2: [(1.0, 33, -1.0, False)],
                3: [(1.0, 22, -1.0, False)]
            },
            34: {
                0: [(1.0, 14, -1.0, False)],
                1: [(1.0, 25, -1.0, False)],
                2: [(1.0, 34, -1.0, False)],
                3: [(1.0, 23, -1.0, False)]
            },
            35: {
                0: [(1.0, 15, -1.0, False)],
                1: [(1.0, 26, -1.0, False)],
                2: [(1.0, 35, -1.0, False)],
                3: [(1.0, 24, -1.0, False)]
            },
            36: {
                0: [(1.0, 6, -1.0, False)],
                1: [(1.0, 17, -1.0, False)],
                2: [(1.0, 26, -1.0, False)],
                3: [(1.0, 15, -1.0, False)]
            },
            37: {
                0: [(1.0, 7, -1.0, False)],
                1: [(1.0, 18, -1.0, False)],
                2: [(1.0, 27, -1.0, False)],
                3: [(1.0, 16, -1.0, False)]
            },
            38: {
                0: [(1.0, 18, -1.0, False)],
                1: [(1.0, 29, -1.0, False)],
                2: [(1.0, 38, -1.0, False)],
                3: [(1.0, 27, -1.0, False)]
            },
            39: {
                0: [(1.0, 29, -1.0, False)],
                1: [(1.0, 39, -1.0, False)],
                2: [(1.0, 49, -1.0, False)],
                3: [(1.0, 38, -1.0, False)]
            },
            40: {
                0: [(1.0, 30, -1.0, False)],
                1: [(1.0, 41, -1.0, False)],
                2: [(1.0, 50, -1.0, False)],
                3: [(1.0, 40, -1.0, False)]
            },
            41: {
                0: [(1.0, 31, -1.0, False)],
                1: [(1.0, 42, -1.0, False)],
                2: [(1.0, 51, -1.0, False)],
                3: [(1.0, 40, -1.0, False)]
            },
            42: {
                0: [(1.0, 32, -1.0, False)],
                1: [(1.0, 43, -1.0, False)],
                2: [(1.0, 52, -1.0, False)],
                3: [(1.0, 41, -1.0, False)]
            },
            43: {
                0: [(1.0, 23, -1.0, False)],
                1: [(1.0, 34, -1.0, False)],
                2: [(1.0, 43, -1.0, False)],
                3: [(1.0, 32, -1.0, False)]
            },
            44: {
                0: [(1.0, 24, -1.0, False)],
                1: [(1.0, 35, -1.0, False)],
                2: [(1.0, 44, -1.0, False)],
                3: [(1.0, 33, -1.0, False)]
            },
            45: {
                0: [(1.0, 25, -1.0, False)],
                1: [(1.0, 36, -1.0, False)],
                2: [(1.0, 45, -1.0, False)],
                3: [(1.0, 34, -1.0, False)]
            },
            46: {
                0: [(1.0, 16, -1.0, False)],
                1: [(1.0, 27, -1.0, False)],
                2: [(1.0, 36, -1.0, False)],
                3: [(1.0, 25, -1.0, False)]
            },
            47: {
                0: [(1.0, 17, -1.0, False)],
                1: [(1.0, 28, -1.0, False)],
                2: [(1.0, 37, -1.0, True)],
                3: [(1.0, 26, -1.0, False)]
            },
            48: {
                0: [(1.0, 28, -1.0, False)],
                1: [(1.0, 39, -1.0, False)],
                2: [(1.0, 48, -1.0, False)],
                3: [(1.0, 37, -1.0, True)]
            },
            49: {
                0: [(1.0, 39, -1.0, False)],
                1: [(1.0, 49, -1.0, False)],
                2: [(1.0, 59, -1.0, False)],
                3: [(1.0, 48, -1.0, False)]
            },
            50: {
                0: [(1.0, 40, -1.0, False)],
                1: [(1.0, 51, -1.0, False)],
                2: [(1.0, 60, -1.0, False)],
                3: [(1.0, 50, -1.0, False)]
            },
            51: {
                0: [(1.0, 41, -1.0, False)],
                1: [(1.0, 52, -1.0, False)],
                2: [(1.0, 61, -1.0, False)],
                3: [(1.0, 50, -1.0, False)]
            },
            52: {
                0: [(1.0, 42, -1.0, False)],
                1: [(1.0, 53, -1.0, False)],
                2: [(1.0, 62, -1.0, False)],
                3: [(1.0, 51, -1.0, False)]
            },
            53: {
                0: [(1.0, 33, -1.0, False)],
                1: [(1.0, 44, -1.0, False)],
                2: [(1.0, 53, -1.0, False)],
                3: [(1.0, 42, -1.0, False)]
            },
            54: {
                0: [(1.0, 34, -1.0, False)],
                1: [(1.0, 45, -1.0, False)],
                2: [(1.0, 54, -1.0, False)],
                3: [(1.0, 43, -1.0, False)]
            },
            55: {
                0: [(1.0, 35, -1.0, False)],
                1: [(1.0, 46, -1.0, False)],
                2: [(1.0, 55, -1.0, False)],
                3: [(1.0, 44, -1.0, False)]
            },
            56: {
                0: [(1.0, 26, -1.0, False)],
                1: [(1.0, 37, -1.0, True)],
                2: [(1.0, 46, -1.0, False)],
                3: [(1.0, 35, -1.0, False)]
            },
            57: {
                0: [(1.0, 27, -1.0, False)],
                1: [(1.0, 38, -1.0, False)],
                2: [(1.0, 47, -1.0, False)],
                3: [(1.0, 36, -1.0, False)]
            },
            58: {
                0: [(1.0, 38, -1.0, False)],
                1: [(1.0, 49, -1.0, False)],
                2: [(1.0, 58, -1.0, False)],
                3: [(1.0, 47, -1.0, False)]
            },
            59: {
                0: [(1.0, 49, -1.0, False)],
                1: [(1.0, 59, -1.0, False)],
                2: [(1.0, 69, -1.0, False)],
                3: [(1.0, 58, -1.0, False)]
            },
            60: {
                0: [(1.0, 50, -1.0, False)],
                1: [(1.0, 61, -1.0, False)],
                2: [(1.0, 60, -1.0, False)],
                3: [(1.0, 60, -1.0, False)]
            },
            61: {
                0: [(1.0, 51, -1.0, False)],
                1: [(1.0, 62, -1.0, False)],
                2: [(1.0, 61, -1.0, False)],
                3: [(1.0, 60, -1.0, False)]
            },
            62: {
                0: [(1.0, 52, -1.0, False)],
                1: [(1.0, 63, -1.0, False)],
                2: [(1.0, 62, -1.0, False)],
                3: [(1.0, 61, -1.0, False)]
            },
            63: {
                0: [(1.0, 43, -1.0, False)],
                1: [(1.0, 54, -1.0, False)],
                2: [(1.0, 63, -1.0, False)],
                3: [(1.0, 52, -1.0, False)]
            },
            64: {
                0: [(1.0, 44, -1.0, False)],
                1: [(1.0, 55, -1.0, False)],
                2: [(1.0, 64, -1.0, False)],
                3: [(1.0, 53, -1.0, False)]
            },
            65: {
                0: [(1.0, 45, -1.0, False)],
                1: [(1.0, 56, -1.0, False)],
                2: [(1.0, 65, -1.0, False)],
                3: [(1.0, 54, -1.0, False)]
            },
            66: {
                0: [(1.0, 36, -1.0, False)],
                1: [(1.0, 47, -1.0, False)],
                2: [(1.0, 56, -1.0, False)],
                3: [(1.0, 45, -1.0, False)]
            },
            67: {
                0: [(1.0, 37, -1.0, True)],
                1: [(1.0, 48, -1.0, False)],
                2: [(1.0, 57, -1.0, False)],
                3: [(1.0, 46, -1.0, False)]
            },
            68: {
                0: [(1.0, 48, -1.0, False)],
                1: [(1.0, 59, -1.0, False)],
                2: [(1.0, 68, -1.0, False)],
                3: [(1.0, 57, -1.0, False)]
            },
            69: {
                0: [(1.0, 59, -1.0, False)],
                1: [(1.0, 69, -1.0, False)],
                2: [(1.0, 69, -1.0, False)],
                3: [(1.0, 68, -1.0, False)]
            }
        }

        initial_states = numpy.zeros(70)
        initial_states[30] = 1.0

        super(WindyGridworld, self).__init__(70, 4, transitions, initial_states)


wgw = WindyGridworld()